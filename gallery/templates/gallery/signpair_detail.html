{% extends "base.html" %}
{% block content %}
<div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto">
  <div class="flex flex-col md:flex-row md:justify-center md:space-x-12 mb-8">
    <div class="flex flex-col items-center mb-6 md:mb-0 w-full md:w-1/2">
      {% if pair.MenImageUrl %}
        <img src="{{ AZURE_BLOB_BASE_URL }}{{ pair.MenImageUrl }}" alt="Men's sign" class="w-full h-96 object-contain rounded-2xl border-4 border-blue-400 shadow mb-2">
      {% else %}
        <span class="w-32 h-32 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow mb-2">
          <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/></svg>
        </span>
      {% endif %}
      <p class="text-center mt-2 text-gray-600 font-semibold">Men's Sign</p>
    </div>
    <div class="flex flex-col items-center w-full md:w-1/2">
      {% if pair.WomenImageUrl %}
        <img src="{{ AZURE_BLOB_BASE_URL }}{{ pair.WomenImageUrl }}" alt="Women's sign" class="w-full h-96 object-contain rounded-2xl border-4 border-pink-400 shadow mb-2">
      {% else %}
        <span class="w-32 h-32 flex items-center justify-center bg-gray-200 rounded-full border-4 border-gray-300 shadow mb-2">
          <svg class="w-16 h-16 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/></svg>
        </span>
      {% endif %}
      <p class="text-center mt-2 text-gray-600 font-semibold">Women's Sign</p>
    </div>
  </div>
  <div class="flex flex-col items-center mb-8">
    <h1 class="text-3xl font-extrabold mb-2 text-gray-800">{{ pair.Place }}</h1>
    <p class="mb-2 text-gray-700">{{ pair.Description }}</p>
    <div class="flex items-center text-gray-500 text-sm mb-4">
      <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17.657 16.657L13.414 12.414a4 4 0 1 0-1.414 1.414l4.243 4.243a1 1 0 0 0 1.414-1.414z"/></svg>
      Coordinates: {{ pair.Latitude }}, {{ pair.Longitude }}
    </div>
    <div class="flex items-center space-x-2 mb-2">
      <span class="text-blue-800 font-semibold">Average Vote:</span>
      <span class="text-lg">{{ pair.AvgVote|default:0|floatformat:1 }} / 5</span>
      <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 0 0 .95.69h4.175c.969 0 1.371 1.24.588 1.81l-3.38 2.455a1 1 0 0 0-.364 1.118l1.286 3.966c.3.922-.755 1.688-1.54 1.118l-3.38-2.455a1 1 0 0 0-1.176 0l-3.38 2.455c-.784.57-1.838-.196-1.54-1.118l1.286-3.966a1 1 0 0 0-.364-1.118L2.05 9.394c-.783-.57-.38-1.81.588-1.81h4.175a1 1 0 0 0 .95-.69l1.286-3.967z"/></svg>
    </div>
  </div>
  <div class="flex flex-col items-center">
    <form method="post" action="{% url 'gallery:vote' pair.RowKey %}" class="bg-gray-50 rounded px-6 py-4 shadow max-w-md w-full mb-4">
      {% csrf_token %}
      <label for="rating" class="block text-gray-700 font-bold mb-2 flex items-center">
        <svg class="w-5 h-5 mr-2 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 0 0 .95.69h4.175c.969 0 1.371 1.24.588 1.81l-3.38 2.455a1 1 0 0 0-.364 1.118l1.286 3.966c.3.922-.755 1.688-1.54 1.118l-3.38-2.455a1 1 0 0 0-1.176 0l-3.38 2.455c-.784.57-1.838-.196-1.54-1.118l1.286-3.966a1 1 0 0 0-.364-1.118L2.05 9.394c-.783-.57-.38-1.81.588-1.81h4.175a1 1 0 0 0 .95-.69l1.286-3.967z"/></svg>
        Your vote (1-5):
      </label>
      <div class="flex items-center space-x-2 mb-4">
        {% for i in "12345" %}
          <input type="radio" name="rating" id="star{{ forloop.counter }}" value="{{ forloop.counter }}" class="hidden peer" required>
          <label for="star{{ forloop.counter }}" class="cursor-pointer">
            <svg class="w-6 h-6 text-yellow-400 peer-checked:text-yellow-500 transition-colors" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 0 0 .95.69h4.175c.969 0 1.371 1.24.588 1.81l-3.38 2.455a1 1 0 0 0-.364 1.118l1.286 3.966c.3.922-.755 1.688-1.54 1.118l-3.38-2.455a1 1 0 0 0-1.176 0l-3.38 2.455c-.784.57-1.838-.196-1.54-1.118l1.286-3.966a1 1 0 0 0-.364-1.118L2.05 9.394c-.783-.57-.38-1.81.588-1.81h4.175a1 1 0 0 0 .95-.69l1.286-3.967z"/></svg>
          </label>
        {% endfor %}
      </div>
      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full">Vote</button>
    </form>
    <a href="{% url 'gallery:signpair_list' %}" class="text-blue-600 hover:underline">Back to list</a>
  </div>
</div>
{% endblock %}
